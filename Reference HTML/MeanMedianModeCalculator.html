<!DOCTYPE html>
<html>
	<head>
		<style>
			h1{
				text-align: center;
				font-size: 45px;
			}
			h2{
				font-size: 35px;
			}
			p{
				font-size: 25px;
			}
			math {
				font-size: 30px;
			}
		</style>
	</head>
		
	<body>
		<h1>Mean, Median and Mode Calculator</h1>
		<h2>Formulas</h2>
		<math>
			<mtext>Mean:&nbsp;&nbsp;</mtext>
			<mfrac>
				<mrow>
					<ms>&Sigma;</ms>
					<msub><ms>x</ms><ms>i</ms></msub>
				</mrow>
				<ms>n</ms>
			</mfrac>
		</math>
		<p>&Sigma;x<sub>i</sub>: The summation of all the values in a dataset.</p>
		<p>n: The number of values in a dataset.</p>
		<p>Median (Odd Amount of Numbers): The middle number (1, 2, <b>3</b>, 4, 5... Median: 3)</p>
		<p>Median (Even Amount of Numbers): (n/2<sub>term</sub> + n/2 - 1<sub>term</sub>) / 2</p>
		<p>Mode: The number(s) that appear the most</p>
		<h2>Input Number</h2>
		<input id="numberInput">
		<button id="enterInput">Enter Input</button>
		<h2>Calculate</h2>
		<button id="calculateInput">Calculate</button>
		<h2>Results</h2>
		<p style="text-align: center; font-size: 60px;" id="calculationP1">Datset: []</p>
		<p style="text-align: center; font-size: 50px;" id="calculationP2">Mean: </p>
		<p style="text-align: center; font-size: 50px;" id="calculationP3">Median: </p>
		<p style="text-align: center; font-size: 50px;" id="calculationP4">Mode: </p>
		
	</body>
	<script>
		let data = [];
		let dataMean = 0;
		let dataMedian = 0;
		let dataModes = [];
		
		const enterInput = document.getElementById("enterInput");
		const numberInput = document.getElementById("numberInput");
		const calculateInput = document.getElementById("calculateInput");
		const calculationP1 = document.getElementById("calculationP1");
		const calculationP2 = document.getElementById("calculationP2");
		const calculationP3 = document.getElementById("calculationP3");
		const calculationP4 = document.getElementById("calculationP4");
		
		setInterval(update, 10);
		
		enterInput.addEventListener("click", function(){
			const number = parseFloat(numberInput.value);
			if(isNaN(number)){
				return;
			}
			data.push(number);
		});
		
		calculateInput.addEventListener("click", function(){
			for(num of data){
				if(isNaN(num)){
					return;
				}
			}
			dataMean = 0;
			dataMedian = 0;
			dataModes = [];
			data.sort((a, b) => a - b);
			for(num of data){
				dataMean += num;
			}
			const modeMap = new Map();
			let maxFrequency = 0;
	
			for(const number of data){
				const count = (modeMap.get(number) || 0) + 1;
				modeMap.set(number, count);
				if(count > maxFrequency){
					maxFrequency = count;
				}
			}
	
			for (const [number, count] of modeMap.entries()) {
				if (count === maxFrequency) {
					dataModes.push(number);
				}
			}

			if(data.length % 2 === 0){
				dataMedian = (Number(data[(data.length / 2)]) + Number(data[(data.length / 2 - 1)])) / 2;
			} else {
				dataMedian = data[Math.floor(data.length / 2)];
			}
			
			dataMean /= data.length;
			calculationP2.innerHTML = `Mean: ${dataMean}`;
			calculationP3.innerHTML = `Median: ${dataMedian}`;
			calculationP4.innerHTML = `Mode: ${dataModes}`;
		});
		
		function update(){
			calculationP1.textContent = `Dataset: [${data}]`;
		}
		
	</script>
</html>
	